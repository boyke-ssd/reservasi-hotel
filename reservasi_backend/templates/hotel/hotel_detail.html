{% extends 'layout/base.html' %}
{% load static %}
{% load humanize %}

{% block content %}
<style>
    /* Hide scrollbar for Chrome, Safari and Opera */
    .scrollbar-hidden::-webkit-scrollbar {
        display: none;
    }
    
    /* Hide scrollbar for IE, Edge and Firefox */
    .scrollbar-hidden {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
    
    .hotel-image-hover {
        transition: transform 0.5s ease;
    }
    
    .hotel-image-hover:hover {
        transform: scale(1.05);
    }
    
    /* Gallery modal animations */
    #galleryModal {
        transition: opacity 0.3s ease-in-out;
    }
    
    #galleryModal.hidden {
        opacity: 0;
        pointer-events: none;
    }
    
    #galleryModal.flex {
        opacity: 1;
        pointer-events: auto;
    }
    
    /* Thumbnail active state */
    .thumbnail-item img.border-white {
        box-shadow: 0 0 0 2px white;
    }
    
    /* Add smooth transition for modal image changes */
    #modalMainImage {
        transition: opacity 0.2s ease;
    }
</style>
<!-- Back Navigation -->
<div class="bg-blue-50">
    <div class="container mx-auto px-4 py-3">
        <a href="{% url 'hotel_search' %}" class="flex items-center text-blue-600 text-sm font-medium hover:underline">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            All properties in {{ hotel.region }}
        </a>
    </div>
</div>

<!-- Hotel Details Section -->
<section class="bg-white py-6">
    <div class="container mx-auto px-4 py-3">
        <nav class="flex space-x-8 border-b border-gray-200 mb-6 overflow-x-auto pb-1 scrollbar-hidden">
            <a href="#ringkasan" class="nav-tab border-b-2 border-blue-600 pb-3 text-blue-600 font-semibold text-sm whitespace-nowrap">Ringkasan</a>
            <a href="#kamar" class="nav-tab pb-3 text-gray-600 hover:text-blue-600 font-medium text-sm whitespace-nowrap">Kamar</a>
            <a href="#ulasan" class="nav-tab pb-3 text-gray-600 hover:text-blue-600 font-medium text-sm whitespace-nowrap">Ulasan Tamu</a>
            <a href="#fasilitas" class="nav-tab pb-3 text-gray-600 hover:text-blue-600 font-medium text-sm whitespace-nowrap">Layanan & Fasilitas</a>
            <a href="#kebijakan" class="nav-tab pb-3 text-gray-600 hover:text-blue-600 font-medium text-sm whitespace-nowrap">Kebijakan</a>
            <a href="#lokasi" class="nav-tab pb-3 text-gray-600 hover:text-blue-600 font-medium text-sm whitespace-nowrap">Lokasi</a>
        </nav>

        <!-- Hotel Information Section -->
        <div class="flex flex-col lg:flex-row justify-between items-start gap-6 mb-4">
            <div class="flex-1">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">
                    {{ hotel.name }}
                </h1>
                <div class="flex items-center space-x-3 mb-3">
                    <div class="flex items-center text-yellow-400">
                        {% for i in "12345" %}
                            {% if forloop.counter <= hotel.star_rating %}
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/>
                                </svg>
                            {% else %}
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-300" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/>
                                </svg>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <div class="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-0.5 rounded">
                        Opened in 2024
                    </div>
                    <div class="text-amber-800 text-xs font-medium flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                        </svg>
                        <span>No.{{ hotel.id }} of {{ hotel.star_rating }}-Star Select Hotels in {{ hotel.region }}</span>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-3 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <span>{{ hotel.location }}, {{ hotel.region }}, Indonesia <a class="link-hover: text-blue-600 font-medium hover:underline ml-2" href="https://www.google.com/maps/search/?api=1&query={{ hotel.location|urlencode }}" target="_blank">Lihat Peta</a></span>
                    
                </p>
            </div>

            <div class="flex flex-col items-end">
                <div class="flex items-center gap-4 mb-2">
                    <div class="text-right">
                        <div class="text-sm text-gray-400 line-through">Rp {{ harga_termurah|add:10000|intcomma }}</div>
                        <div class="text-3xl font-bold text-gray-800">Rp {{ harga_termurah|intcomma }}</div>
                        <div class="flex items-center justify-end gap-1 text-sm text-teal-600 font-medium">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <span>We Price Match</span>
                        </div>
                    </div>
                </div>
                <a href="{% url 'reservation_form' hotel_id=hotel.id %}" class="bg-blue-600 text-white font-semibold px-8 py-3 rounded-md hover:bg-blue-700 transition-colors text-center">Reservasi Sekarang</a>
            </div>
        </div>

        <!-- Hotel Gallery Section (Similar to Example) -->
        <div class="mt-6 flex flex-col lg:flex-row gap-2">
            <!-- Main Large Image (Left) -->
            <div class="lg:w-1/2 relative">
                {% with main_image=gallery.0 %}
                {% if main_image %}
                <div class="relative h-72 md:h-96 w-full rounded-lg overflow-hidden shadow-sm">
                    <img alt="{{ main_image.caption|default:'Hotel Image' }}" 
                         class="object-cover w-full h-full hotel-image-hover" 
                         src="{{ main_image.image.url }}" />
                    <button aria-label="Add to favorites" class="absolute top-4 right-4 bg-white/80 rounded-full p-2 shadow-md hover:bg-white transition backdrop-blur-sm">
                        <i class="far fa-heart text-gray-700"></i>
                    </button>
                </div>
                {% endif %}
                {% endwith %}
            </div>
            
            <!-- 6 Small Images (Right) in 2 Rows x 3 Columns -->
            <div class="lg:w-1/2">
                <div class="grid grid-cols-3 gap-2 h-full">
                    {% for image in gallery %}
                        {% if forloop.counter > 1 and forloop.counter <= 7 %}
                        <div class="relative h-36 md:h-[11.8rem] {% if forloop.counter == 7 or forloop.counter == 6 and gallery|length <= 6 %}relative group overflow-hidden{% endif %}">
                            <img alt="{{ image.caption|default:'Hotel Image' }}" 
                                class="rounded-lg object-cover w-full h-full hotel-image-hover" 
                                src="{{ image.image.url }}" />
                                
                            {% if forloop.counter == 6 and gallery|length > 6 or forloop.counter == gallery|length and gallery|length <= 6 and gallery|length > 1 %}
                            <div class="absolute inset-0 bg-black/50 flex items-center justify-center rounded-lg group-hover:bg-black/60 transition cursor-pointer" onclick="openGalleryModal()">
                                <div class="text-white text-center">
                                    <div class="flex flex-col items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                        </svg>
                                        <span class="font-medium">Lihat Semua {{ gallery|length }} Foto</span>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                        {% endif %}
                    {% endfor %}
                    
                    <!-- Fill empty slots if there are less than 6 additional images -->
                    {% with remaining=7|add:"-"|add:gallery|length %}
                        {% if remaining > 0 %}
                            {% for i in "123456"|slice:remaining %}
                            <div class="relative h-36 md:h-[11.8rem] bg-gray-100 rounded-lg flex items-center justify-center">
                                <span class="text-gray-400">No image</span>
                            </div>
                            {% endfor %}
                        {% endif %}
                    {% endwith %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Content Sections -->
    <!-- Ringkasan Section -->
    <div id="ringkasan" class="pt-10 pb-8 border-b border-gray-200">
        <div class="mb-6 container mx-auto px-4 py-3">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Tentang {{ hotel.name }}</h2>
            <p class="text-gray-600 leading-relaxed">
                {{ hotel.name }} menawarkan akomodasi yang nyaman di pusat {{ hotel.region }}. Properti bintang {{ hotel.star_rating }} ini dilengkapi dengan berbagai fasilitas modern dan pelayanan terbaik untuk memastikan kenyamanan tamu selama menginap.
                Lokasi hotel yang strategis di {{ hotel.location }} menjadikannya pilihan ideal untuk perjalanan bisnis maupun liburan.
            </p>
            <div class="mt-4">
                <h3 class="font-semibold text-gray-800 mb-2">Highlights:</h3>
                <ul class="list-disc pl-5 text-gray-600 space-y-1">
                    <li>Lokasi strategis di {{ hotel.region }}</li>
                    <li>Hotel bintang {{ hotel.star_rating }} dengan pelayanan premium</li>
                    <li>Kamar yang nyaman dengan fasilitas modern</li>
                    <li>Restoran dengan menu beragam</li>
                    <li>Wifi gratis di seluruh area hotel</li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Kamar Section -->
    <div id="kamar" class="pt-10 pb-8 border-b border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6 container mx-auto px-4 py-3">Kamar</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            {% for room_type in hotel.roomtype_set.all %}
            <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
                <div class="h-48 overflow-hidden">
                    {% if room_type.image %}
                    <img src="{{ room_type.image.url }}" alt="{{ room_type.name }}" class="w-full h-full object-cover">
                    {% else %}
                    <div class="bg-gray-100 w-full h-full flex items-center justify-center">
                        <span class="text-gray-400">No image available</span>
                    </div>
                    {% endif %}
                </div>
                <div class="p-4">
                    <h3 class="font-bold text-gray-800 mb-2">{{ room_type.name }}</h3>
                    <div class="flex items-center text-sm text-gray-600 mb-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                        </svg>
                        <span>{{ room_type.capacity }} tamu</span>
                        <span class="mx-2">•</span>
                        <span>{{ room_type.size }} m²</span>
                    </div>
                    <div class="text-sm text-gray-600 mb-4">
                        <p>{{ room_type.description|truncatechars:100 }}</p>
                    </div>
                    <div class="flex justify-between items-end">
                        <div>
                            <div class="text-sm text-gray-500">Mulai dari</div>
                            <div class="text-xl font-bold text-gray-800">Rp {{ room_type.base_price|intcomma }}</div>
                        </div>
                        <a href="{% url 'reservation_form' hotel_id=hotel.id %}" class="bg-blue-600 text-white px-4 py-2 rounded text-sm font-medium hover:bg-blue-700 transition-colors">Pilih</a>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-span-2 py-8 text-center text-gray-500">
                <p>Tidak ada informasi kamar tersedia saat ini.</p>
            </div>
            {% endfor %}
        </div>
    </div>
    
    <!-- Ulasan Tamu Section -->
    <div id="ulasan" class="pt-10 pb-8 border-b border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-6 container mx-auto px-4 py-3">Ulasan Tamu</h2>
        
        <div class="bg-blue-50  container mx-auto px-4 py-3">
            <div class="flex items-center justify-between mb-4">
                <div>
                    <h3 class="font-bold text-lg text-gray-800">Rating Keseluruhan</h3>
                    <div class="text-sm text-gray-600">Berdasarkan pengalaman tamu kami</div>
                </div>
                <div class="text-center">
                    <div class="text-4xl font-bold text-blue-600">4.5</div>
                    <div class="flex items-center text-yellow-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                            <defs>
                                <linearGradient id="half-star" x1="0" x2="100%" y1="0" y2="0">
                                    <stop offset="50%" stop-color="currentColor"></stop>
                                    <stop offset="50%" stop-color="#E5E7EB"></stop>
                                </linearGradient>
                            </defs>
                            <path fill="url(#half-star)" d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/>
                        </svg>
                    </div>
                    <div class="text-sm text-gray-600 mt-1">10 ulasan</div>
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <div class="flex justify-between mb-2">
                        <div class="font-medium">Kebersihan</div>
                        <div class="flex items-center">
                            <div class="mr-2 text-sm font-bold">4.7</div>
                            <div class="w-20 bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: 94%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-between mb-2">
                        <div class="font-medium">Kenyamanan</div>
                        <div class="flex items-center">
                            <div class="mr-2 text-sm font-bold">4.5</div>
                            <div class="w-20 bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: 90%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <div class="flex justify-between mb-2">
                        <div class="font-medium">Lokasi</div>
                        <div class="flex items-center">
                            <div class="mr-2 text-sm font-bold">4.8</div>
                            <div class="w-20 bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: 96%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-between mb-2">
                        <div class="font-medium">Pelayanan</div>
                        <div class="flex items-center">
                            <div class="mr-2 text-sm font-bold">4.3</div>
                            <div class="w-20 bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: 86%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Sample Review -->
            <div class="border-b border-gray-200 container mx-auto px-6 py-3">
                <div class="flex items-start mb-3">
                    <div class="bg-blue-100 rounded-full w-10 h-10 flex items-center justify-center mr-3 text-blue-600 font-bold">A</div>
                    <div>
                        <div class="font-medium">Ahmad S.</div>
                        <div class="text-sm text-gray-500">Indonesia • Menginap pada Juli 2025</div>
                    </div>
                </div>
                <div class="flex items-center mb-3">
                    <div class="flex text-yellow-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568L24 9.75l-6 5.847L19.336 24 12 19.771 4.664 24 6 15.597 0 9.75l8.332-1.595z"/></svg>
                    </div>
                    <span class="ml-2 text-sm font-medium text-gray-700">Luar Biasa</span>
                </div>
                <p class="text-gray-600">Hotel yang sangat nyaman dengan pemandangan kota yang indah. Kamar bersih dan pelayanan ramah. Sarapan buffet juga enak dengan banyak pilihan menu. Lokasi strategis dekat dengan pusat perbelanjaan.</p>
            </div>
        </div>
        
        
        <div class="text-center">
            <button class="border border-blue-600 text-blue-600 px-6 py-2 rounded-lg font-medium hover:bg-blue-50 transition-colors">Lihat Semua Ulasan</button>
        </div>
    </div>
    
    <!-- Fasilitas Section -->
    <div id="fasilitas" class="pt-10 pb-8 border-b border-gray-200 container mx-auto px-4 py-3">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Layanan & Fasilitas</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div>
                <h3 class="font-bold text-gray-800 mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                    </svg>
                    Internet
                </h3>
                <ul class="space-y-2">
                    <li class="flex items-center text-gray-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                        WiFi gratis di seluruh area
                    </li>
                </ul>
            </div>
            
            <div>
                <h3 class="font-bold text-gray-800 mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                    Fasilitas Kamar
                </h3>
                <ul class="space-y-2">
                    <li class="flex items-center text-gray-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                        AC
                    </li>
                    <li class="flex items-center text-gray-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                        TV layar datar
                    </li>
                    <li class="flex items-center text-gray-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                        Minibar
                    </li>
                </ul>
            </div>
            
            <div>
                <h3 class="font-bold text-gray-800 mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
                    </svg>
                    Area Publik
                </h3>
                <ul class="space-y-2">
                    <li class="flex items-center text-gray-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                        Kolam renang
                    </li>
                    <li class="flex items-center text-gray-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                        Restoran
                    </li>
                    <li class="flex items-center text-gray-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                        Lounge/bar
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Kebijakan Section -->
    <div id="kebijakan" class="pt-10 pb-8 border-b border-gray-200 container mx-auto px-4 py-3">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Kebijakan</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
                <h3 class="font-medium text-gray-800 mb-3">Waktu Check-in & Check-out</h3>
                <div class="flex items-start mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-500 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1" />
                    </svg>
                    <div>
                        <div class="font-semibold">Check-in</div>
                        <div class="text-gray-600">Mulai 14:00</div>
                    </div>
                </div>
                <div class="flex items-start mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-500 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                    <div>
                        <div class="font-semibold">Check-out</div>
                        <div class="text-gray-600">Sebelum 12:00</div>
                    </div>
                </div>
            </div>
            
            <div>
                <h3 class="font-medium text-gray-800 mb-3">Kebijakan Pembatalan</h3>
                <p class="text-gray-600 leading-relaxed">
                    Pembatalan dan perubahan dapat dilakukan sesuai dengan kebijakan akomodasi.
                    Pembatalan gratis hingga 24 jam sebelum check-in. 
                    Setelah itu, pembatalan akan dikenakan biaya sebesar harga satu malam.
                </p>
                
                <h3 class="font-medium text-gray-800 mt-6 mb-3">Kebijakan Anak</h3>
                <p class="text-gray-600 leading-relaxed">
                    Anak-anak berusia berapapun dapat menginap di properti ini.
                    Anak berusia di bawah 6 tahun dapat menginap gratis jika menggunakan tempat tidur yang sudah ada.
                </p>
            </div>
        </div>
    </div>
    
    <!-- Lokasi Section -->
    <div id="lokasi" class="pt-10 pb-8 container mx-auto px-4 py-3">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Lokasi</h2>
        
        <div class="bg-gray-100 rounded-lg overflow-hidden h-80 mb-6">
            <iframe 
                width="100%" 
                height="100%" 
                frameborder="0" 
                scrolling="no" 
                marginheight="0" 
                marginwidth="0" 
                src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q={{ hotel.location|urlencode }},{{ hotel.region|urlencode }},Indonesia" 
                style="border:0;" 
                allowfullscreen=""
                loading="lazy">
            </iframe>
        </div>
        
        <div class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-500 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
            <div>
                <h3 class="font-medium">Alamat</h3>
                <p class="text-gray-600">{{ hotel.location }}, {{ hotel.region }}, Indonesia</p>
                <div class="mt-2">
                    <a href="https://www.google.com/maps/search/?api=1&query={{ hotel.location|urlencode }},{{ hotel.region|urlencode }},Indonesia" target="_blank" class="text-blue-600 font-medium hover:underline flex items-center">
                        Dapatkan Petunjuk Arah
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Gallery Modal -->
<div id="galleryModal" class="fixed inset-0 bg-white z-50 hidden overflow-y-auto">
    <div class="relative w-full max-w-screen-xl mx-auto px-6 py-6">
        <!-- Header with tabs and close button -->
        <div class="flex justify-between items-center mb-6">
            <div>
                <h2 class="text-xl font-bold text-gray-800">{{ hotel.name }}</h2>
                <div class="flex items-center mt-2 space-x-4">
                    <a href="#" class="text-blue-600 font-medium text-sm border-b-2 border-blue-600 pb-1">Hotel Uploads <span class="text-gray-500">({{ gallery|length }})</span></a>
                    <a href="#" class="text-gray-500 hover:text-blue-600 font-medium text-sm pb-1">User Uploads <span class="text-gray-500">(0)</span></a>
                </div>
            </div>
            <button onclick="closeGalleryModal()" class="p-2 rounded-full hover:bg-gray-100">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        
        <!-- Category Navigation -->
        <div class="flex flex-wrap gap-2 mb-6">
            <div class="px-4 py-3 bg-gray-900 text-white rounded-lg flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                </svg>
                <span>Exterior ({{ gallery|length }})</span>
            </div>
            <div class="px-4 py-3 bg-white text-gray-700 border border-gray-200 rounded-lg flex items-center hover:bg-gray-50">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
                <span>Rooms (0)</span>
            </div>
            <div class="px-4 py-3 bg-white text-gray-700 border border-gray-200 rounded-lg flex items-center hover:bg-gray-50">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <span>Dining (0)</span>
            </div>
            <div class="px-4 py-3 bg-white text-gray-700 border border-gray-200 rounded-lg flex items-center hover:bg-gray-50">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
                <span>Facilities (0)</span>
            </div>
        </div>
        
        <!-- Grid layout for all images -->
        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
            {% for image in gallery %}
            <div class="gallery-item aspect-square rounded-lg overflow-hidden shadow-sm">
                <img src="{{ image.image.url }}" 
                     alt="{{ image.caption|default:'Hotel Image' }}" 
                     class="w-full h-full object-cover hover:scale-105 transition-transform duration-300 cursor-pointer"
                     onclick="openFullImage('{{ image.image.url }}', {{ forloop.counter0 }})" />
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Full-size image view -->
<div id="fullImageView" class="fixed inset-0 bg-black/95 z-[60] hidden flex items-center justify-center">
    <button onclick="closeFullImage()" class="absolute top-4 right-4 text-white hover:text-gray-300 z-10">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
    </button>
    
    <div class="relative w-full h-full flex items-center justify-center">
        <img id="fullSizeImage" src="" alt="Hotel Image" class="max-h-[85vh] max-w-[90%] object-contain" />
        
        <!-- Navigation arrows -->
        <button id="prevFullImage" class="absolute left-4 text-white hover:text-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
        </button>
        <button id="nextFullImage" class="absolute right-4 text-white hover:text-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
        </button>
    </div>
</div>

<script>
    // Gallery modal functionality
    let currentImageIndex = 0;
    const galleryImages = [
        {% for image in gallery %}
            "{{ image.image.url }}"{% if not forloop.last %},{% endif %}
        {% endfor %}
    ];
    
    function openGalleryModal() {
        document.getElementById('galleryModal').classList.remove('hidden');
        document.getElementById('galleryModal').classList.add('block');
        document.body.style.overflow = 'hidden';
    }
    
    function closeGalleryModal() {
        document.getElementById('galleryModal').classList.add('hidden');
        document.getElementById('galleryModal').classList.remove('block');
        document.body.style.overflow = 'auto';
        
        // Also close full image view if it's open
        if (!document.getElementById('fullImageView').classList.contains('hidden')) {
            closeFullImage();
        }
    }
    
    function openFullImage(src, index) {
        document.getElementById('fullImageView').classList.remove('hidden');
        document.getElementById('fullImageView').classList.add('flex');
        document.getElementById('fullSizeImage').src = src;
        currentImageIndex = index;
    }
    
    function closeFullImage() {
        document.getElementById('fullImageView').classList.add('hidden');
        document.getElementById('fullImageView').classList.remove('flex');
    }
    
    function changeFullImage(index) {
        currentImageIndex = index;
        document.getElementById('fullSizeImage').src = galleryImages[index];
    }
    
    // Set up full image navigation
    document.getElementById('prevFullImage').addEventListener('click', () => {
        const newIndex = currentImageIndex > 0 ? currentImageIndex - 1 : galleryImages.length - 1;
        changeFullImage(newIndex);
    });
    
    document.getElementById('nextFullImage').addEventListener('click', () => {
        const newIndex = currentImageIndex < galleryImages.length - 1 ? currentImageIndex + 1 : 0;
        changeFullImage(newIndex);
    });
    
    // Navigation tabs handling
    document.addEventListener('DOMContentLoaded', function() {
        const navLinks = document.querySelectorAll('.nav-tab');
        const sections = document.querySelectorAll('#ringkasan, #kamar, #ulasan, #fasilitas, #kebijakan, #lokasi');
        
        // Function to update active tab
        function setActiveTab(targetId) {
            navLinks.forEach(link => {
                if (link.getAttribute('href') === '#' + targetId) {
                    link.classList.add('border-b-2', 'border-blue-600', 'text-blue-600', 'font-semibold');
                    link.classList.remove('text-gray-600', 'font-medium');
                } else {
                    link.classList.remove('border-b-2', 'border-blue-600', 'text-blue-600', 'font-semibold');
                    link.classList.add('text-gray-600', 'font-medium');
                }
            });
        }
        
        // Handle navigation clicks
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    // Smooth scroll to section
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                    
                    setActiveTab(targetId);
                    
                    // Update URL hash without scrolling
                    history.pushState(null, null, '#' + targetId);
                }
            });
        });
        
        // Handle scroll to detect which section is in view
        let isScrolling = false;
        window.addEventListener('scroll', function() {
            if (!isScrolling) {
                isScrolling = true;
                setTimeout(() => {
                    let currentSection = '';
                    
                    sections.forEach(section => {
                        const sectionTop = section.offsetTop - 120;
                        const sectionHeight = section.offsetHeight;
                        const scrollPosition = window.scrollY;
                        
                        if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                            currentSection = section.getAttribute('id');
                        }
                    });
                    
                    if (currentSection) {
                        setActiveTab(currentSection);
                        history.replaceState(null, null, '#' + currentSection);
                    }
                    
                    isScrolling = false;
                }, 100);
            }
        });
        
        // Check for hash in URL on page load
        if (window.location.hash) {
            const targetId = window.location.hash.substring(1);
            const targetElement = document.getElementById(targetId);
            
            if (targetElement) {
                setTimeout(() => {
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                    setActiveTab(targetId);
                }, 300);
            }
        }
    });
    
    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        // For gallery modal
        if (!document.getElementById('galleryModal').classList.contains('hidden')) {
            if (e.key === 'Escape') {
                closeGalleryModal();
            }
        }
        
        // For full image view
        if (!document.getElementById('fullImageView').classList.contains('hidden')) {
            if (e.key === 'Escape') {
                closeFullImage();
            } else if (e.key === 'ArrowLeft') {
                document.getElementById('prevFullImage').click();
            } else if (e.key === 'ArrowRight') {
                document.getElementById('nextFullImage').click();
            }
        }
    });
</script>
{% endblock %}