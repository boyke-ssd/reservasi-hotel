{% extends 'layout/base.html' %}
{% load widget_tweaks %}

{% block title %}Login - Hotel Djangoo{% endblock %}

{% block content %}
{# ================================================================= #}
{# WRAPPER UNTUK MEMBUAT KONTEN DI TENGAH DAN MEMBERI BACKGROUND     #}
{# ================================================================= #}
<div class="min-h-screen flex items-center justify-center bg-gradient-to-br gradient-bg px-4 py-8">

    {# Kartu form #}
    <div class="bg-white bg-opacity-20 backdrop-blur-lg shadow-xl rounded-2xl px-6 py-6 w-full max-w-md">
        <h2 class="text-3xl font-bold mb-2 text-center text-white">Selamat Datang</h2>
        <p class="text-center text-gray-200 mb-8">Silakan masuk untuk melanjutkan</p>

        <form method="post" class="space-y-5" id="login-form">
            {% csrf_token %}

            {% if form.non_field_errors %}
                <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative" role="alert">
                    {% for error in form.non_field_errors %}
                        <span class="block sm:inline">{{ error }}</span>
                    {% endfor %}
                </div>
            {% endif %}

            {% for field in form %}
            <div>
                <label for="{{ field.id_for_label }}" class="block text-sm font-semibold mb-2 text-gray-100">
                    {{ field.label }}
                </label>
                
                {% if field.label == "Username" %}
                    {% render_field field class="w-full px-4 py-2.5 border border-transparent bg-white bg-opacity-40 text-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-mint-light transition" placeholder="Masukkan nama pengguna" %}
                {% else %}
                    {% render_field field class="w-full px-4 py-2.5 border border-transparent bg-white bg-opacity-40 text-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-mint-light transition" placeholder="Masukkan kata sandi" %}
                {% endif %}
                
                {% if field.errors %}
                    <p class="text-red-400 text-xs italic mt-2">{{ field.errors.0 }}</p>
                {% endif %}
            </div>
            {% endfor %}

            <button type="submit" class="w-full py-3 mt-4 bg-teal-medium hover:bg-mint-light text-white rounded-lg font-bold text-lg transition duration-300 transform hover:scale-105" id="login-button">
                <span id="button-text">Login</span>
                <span id="button-loading" class="hidden">
                    <svg class="animate-spin h-5 w-5 mr-2 inline-block text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8h8a8 8 0 01-8 8 8 8 0 01-8-8z"></path>
                    </svg>
                    Memproses...
                </span>
            </button>
        </form>

        <p class="text-center text-sm mt-6 text-gray-200">
            Belum punya akun?
            <a href="{% url 'register' %}" class="text-white hover:underline font-bold">Daftar di sini</a>
        </p>
    </div>
</div>

<script>
document.getElementById('login-form').addEventListener('submit', function() {
    const button = document.getElementById('login-button');
    const buttonText = document.getElementById('button-text');
    const buttonLoading = document.getElementById('button-loading');
    button.disabled = true;
    buttonText.classList.add('hidden');
    buttonLoading.classList.remove('hidden');
});
</script>
{% endblock %}